<!DOCTYPE html>
<html>
<head>
    <title>请假管理</title>
    <link type="text/css" rel="stylesheet" href="../js/jquery-easyui/themes/default/easyui.css"/>
    <link type="text/css" rel="stylesheet" href="../js/jquery-easyui/themes/icon.css"/>
    <script src="../js/jquery-easyui/jquery.min.js"></script>
    <script src="../js/jquery-easyui/jquery.easyui.min.js"></script>
    <script src="../js/jquery-easyui/locale/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript">
        $(
            function()
            {
                //初始化table列表
                initNoteList();
                //初始化弹出的页面
                initDialog();
                //初始化员工信息
                initEmployeeList();

                $("#btnAdd").click(
                    function()
                    {
                        $('#addDiv').dialog({
                            closed: false
                        });
                    }
                );

                //为icon注册打开事件
                $("#addForm #employeeId").textbox({
                    icons:[{
                        iconCls:'icon-search',
                        handler: function(e){
                            $('#employeeListDiv').dialog({
                                closed: false
                            });

                        }
                    }]
                });
                $("#addForm #operatorId").textbox({
                    icons:[{
                        iconCls:'icon-search',
                        handler: function(e){
                            $('#operatorListDiv').dialog({
                                closed: false
                            });

                        }
                    }]
                });

                //为员工列表的选择按钮，注册点击事件
                $("#employeeListDiv #btnSelect").click(
                    function()
                    {
                        var row = $('#tblEmployeeList').datagrid('getSelected');

                        var employeeId =row.employeeId;
                        var employeeName =  row.employeeName;
                        var cardNumber = row.cardNumber;

                        //列表框关闭
                        $('#employeeListDiv').dialog({
                            closed: true
                        });

                        $("#addForm #employeeId").textbox(
                            "setValue" , employeeName + "( " + employeeId + "," + cardNumber + " )"
                        );
                    }
                );
                $("#operatorListDiv #btnSelect").click(
                    function()
                    {
                        var row = $('#tblOperatorList').datagrid('getSelected');

                        var employeeId =row.employeeId;
                        var employeeName =  row.employeeName;
                        var cardNumber = row.cardNumber;

                        //列表框关闭
                        $('#operatorListDiv').dialog({
                            closed: true
                        });

                        $("#addForm #operatorId").textbox(
                            "setValue" , employeeName + "( " + employeeId + "," + cardNumber + " )"
                        );
                    }
                );
            }
        );

        function initEmployeeList()
        {
            $('#tblEmployeeList').datagrid({
                url:'json/employee.json',
                method:'get',
                singleSelect:true,
                columns:[[
                    {field:'employeeId',title:'员工编号',width:100},
                    {field:'employeeName',title:'员工姓名',width:100},
                    {field:'cardNumber',title:'员工卡号',width:100}
                ]]
            });
            $('#tblOperatorList').datagrid({
                url:'json/employee.json',
                method:'get',
                singleSelect:true,
                columns:[[
                    {field:'employeeId',title:'代理人编号',width:100},
                    {field:'employeeName',title:'代理人姓名',width:100},
                    {field:'cardNumber',title:'代理人卡号',width:100}
                ]]
            });
        }

        function initDialog()
        {
            $('#employeeListDiv').dialog({
                title: '员工列表',
                width: 400,
                height: 380,
                closed: true,
                modal: true
            });
            $('#operatorListDiv').dialog({
                title: '代理人列表',
                width: 400,
                height: 380,
                closed: true,
                modal: true
            });

            $('#addDiv').dialog({
                title: '请假单管理',
                width: 550,
                height: 400,
                closed: true,
                modal: true
            });
        }

        function initNoteList()
        {
            $('#tblNote').datagrid({
                url:'json/note.json',
                pagination:true,
                pageSize:4,
                pageList:[4,8,12],
                pageNumber:1,
                toolbar:"#barNote",
                rownumbers:true,
                method:'get',
                singleSelect:true,
                columns:[[
                    {field:'fillInTime',title:'填表时间',width:'12.5%',align:'center'},
                    {field:'cardNumber',title:'卡号',width:'12.5%',align:'center'},
                    {field:'employeeName',title:'申请人',width:'12.5%',align:'center'},
                    {field:'typeName',title:'请假类型',width:'12.5%',align:'center'},
                    {field:'startDate',title:'起始时间',width:'12.5%',align:'center'},
                    {field:'endDate',title:'结束时间',width:'12.5%',align:'center'},
                    {field:'operatorName',title:'代理人',width:'12.5%',align:'center'} ,
                    {field:'opt',title:'操作',width:'12.5%',align:'center',
                        formatter:function(value , row , index)
                        {
                            var a = '<a href="#" id="editButton" onclick="edit(' + row.noteId + ')" >编辑</a>&nbsp';
                            var b = '<a href="#" id="editButton" onclick="del(' + row.noteId + ')" >删除</a>&nbsp';
                            var c = '<a href="#" id="editButton" onclick="view(' + row.noteId + ')" >查看</a>&nbsp';
                            return c + a + b;
                        }}
                ]]
            });
        }
    </script>

</head>

<body>
<div class="easyui-layout" data-options="fit:true"
     id="useBox">
    <form id="queryForm" method="post">
        <div style="margin-top: 10px;">
            <label for="isVerify">是否审核通过:</label>
            <select class="easyui-combobox" id="isVerify" name="isVerify" style="width: 60px;">
                <option value="">全部</option>
                <option value="1">通过</option>
                <option value="0">不通过</option>
            </select>
            <label for="noteTypeId">请假类型:</label>
            <input id="noteTypeId" class="easyui-combobox"
                   name="noteTypeId"
                   data-options="width:'60',valueField:'typeId',textField:'typeName',url:'json/noteType.json',method:'get'" />
        </div>
        <div style="margin-top: 10px;">
            <label for="employeeName">员工姓名:</label>
            <input id="employeeName" name="employeeName"
                   class="easyui-textbox"
                   style="width:100px">
            <label for="operatorName">代理人姓名:</label>
            <input id="operatorName" name="operatorName"
                   class="easyui-textbox"
                   style="width:100px">
            <label for="leaveDate">请假日期:</label>
            <input id="leaveDate" name="leaveDate"
                   class="easyui-datebox"
                   style="width:100px">
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <a id="btnQuery" class="easyui-linkbutton"
               iconCls="icon-search" >提交</a>
        </div>
    </form>
    <br/>
    <div class="tableCon">
        <table id="tblNote" ></table>
        <div id="barNote">
            <a id="btnAdd" class="easyui-linkbutton"
               data-options="iconCls:'icon-add'">新增</a>
        </div>
    </div>
</div>
<div id="addDiv">
    <form id="addForm">
        <div style="text-align: center;margin-top: 10px;">
            <label for="employeeId">申请人:</label>
            <input id="employeeId" name="employeeId"
                   class="easyui-textbox easyui-validatebox"
                   data-options="required:true"
                   style="width:300px">
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="operatorId">代理人:</label>
            <input id="operatorId" name="operatorId"
                   class="easyui-textbox easyui-validatebox"
                   data-options="required:true"
                   style="width:300px">
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="noteTypeId">请假类型:</label>
            <input id="noteTypeId" class="easyui-combobox"
                   name="noteTypeId"
                   data-options="valueField:'typeId',textField:'typeName',url:'json/noteType.json',method:'get'" />
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="fillInTime">填表时间:</label>
            <input class="easyui-datetimebox"
                   name="fillInTime" id="fillInTime"
                   data-options="required:true" style="width:150px">
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="cause">请假事由:</label>
            <input class="easyui-textbox" id="cause" name="cause"
                   data-options="multiline:true"
                   style="width:300px;height: 50px;">
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="startDate">请假起始时间:</label>
            <input id="startDate" name="startDate"
                   type="text" class="easyui-datebox"></input>
            <select id="startTime" class="easyui-combobox"
                    name="startTime" style="width:200px;">
                <option value="上午">上午</option>
                <option value="下午">下午</option>
            </select>
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="endDate">请假结束时间:</label>
            <input id="endDate" name="endDate"
                   type="text" class="easyui-datebox"></input>
            <select id="endTime" class="easyui-combobox"
                    name="endTime" style="width:200px;">
                <option value="上午">上午</option>
                <option value="下午">下午</option>
            </select>
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="directorSign">主管经理意见:</label>
            <input class="easyui-textbox"  id="directorSign" name="directorSign"
                   data-options="multiline:true"
                   style="width:300px;height: 50px;">
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="administrationSign">行政部经理意见:</label>
            <input class="easyui-textbox"  id="administrationSign"
                   name="administrationSign"
                   data-options="multiline:true"
                   style="width:300px;height: 50px;">
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <label for="presidentSign">总裁意见:</label>
            <input class="easyui-textbox"  id="presidentSign"
                   name="presidentSign"
                   data-options="multiline:true"
                   style="width:300px;height: 50px;">
        </div>
        <div style="text-align: center;margin-top: 10px;">
            是否同意:
            <input type="radio" name="agreeOrNot" value="是">是
            &nbsp;&nbsp;
            <input type="radio" name="agreeOrNot" value="否">否
        </div>
        <div style="text-align: center;margin-top: 10px;">
            <a id="btnSave" class="easyui-linkbutton"
               data-options="iconCls:'icon-save'">保存</a>
        </div>

    </form>
</div>
<div id="employeeListDiv">
    <form id="queryEmpForm">
        <div style="text-align: center;margin-top: 10px;">
            <label for="employeeName">员工姓名:</label>
            <input class="easyui-textbox"
                   id="employeeName"
                   name="employeeName"
                   style="width:200px">
            <a id="btnSave" class="easyui-linkbutton"
               data-options="iconCls:'icon-search'">查找</a>
        </div>
    </form>
    <div class="tableCon" style="text-align: center;">
        <table id="tblEmployeeList"></table>
        <a id="btnSelect" class="easyui-linkbutton"
           data-options="iconCls:'icon-ok'">确定</a>
    </div>
</div>
<div id="operatorListDiv">
    <form id="queryEmpForm">
        <div style="text-align: center;margin-top: 10px;">
            <label for="employeeName">员工姓名:</label>
            <input class="easyui-textbox"
                   id="employeeName"
                   name="employeeName"
                   style="width:200px">
            <a id="btnSave" class="easyui-linkbutton"
               data-options="iconCls:'icon-search'">查找</a>
        </div>
    </form>
    <div class="tableCon" style="text-align: center;">
        <table id="tblOperatorList" ></table>
        <a id="btnSelect" class="easyui-linkbutton"
           data-options="iconCls:'icon-ok'">确定</a>
    </div>
</div>
</body>
</html>
